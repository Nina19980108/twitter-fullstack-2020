<div class="d-flex mt-5">
  {{!-- 左側欄位 --}}

  <div style="width: 780px;" class="me-5">
    {{!-- 標題 --}}
    <div class="p-2 mb-0" style="width: 100%; outline: 1px solid gray;height:55px">
      <h3><strong>推文</strong></h3>
    </div>

    <div class="d-flex flex-column align-items-center">
      <div style="width: 100%; outline: 1px solid gray;" class="p-3">
        <div class="d-flex align-items-center">
          {{!-- 大頭貼 --}}
          <div>
            <a href="/users/{{tweet.User.id}}/tweets">
              <img src="{{ tweet.User.avatar }}" style="border-radius: 100%;width: 60px">
            </a>
          </div>
          {{!-- 右側文字 --}}
          <div class="ms-3" style="height: 80px;">
            {{!-- 發文者 --}}
            <a href="/users/{{tweet.User.id}}/tweets" style="text-decoration: none;">
              <div class="mb-0">
                <p class="fs-5 me-2 mb-0" style="line-height: 40px;color: black;">{{ tweet.User.name }}</p>
                <p class="mb-0" style="color: darkseagreen;" style="line-height: 40px;">{{ tweet.User.account
                  }}</p>
              </div>
            </a>
          </div>
        </div>
        {{!-- 推文內容 --}}
        <p class="mt-0" style="font-size: large;height: 80px;">
          {{ tweet.description }}
        </p>
        <small>{{momentCH tweet.createdAt}}</small>
        {{!-- Reply and Like count--}}
        <div style="border-bottom: 1px solid #dadde1;">
          <span>{{replyCount}} 回復</span>
          <span>{{likeCount}} 喜歡次數</span>
        </div>
        {{!-- Reply and Like --}}
        <div class="feedback-action"
          style="display: flex;justify-content: space-around;align-items: center;font-weight: 600;font-size: 14px;height: 32px;color: #606770;margin: 10px 20px;min-height: 32px;padding: 4px 0 10px 0; border-bottom: 1px solid #dadde1;">
          {{!-- 回應貼文 --}}
          <button type="button" class="btn post-a-tweet"
            style="background-color: #FF6600;color: white; border-radius: 45%;font-size:20px;" data-bs-toggle="modal"
            data-bs-target="#replyModal" data-id="{{tweet.id}}"><i class="fa fa-comment-o fa-2x"></i></button>
          {{!-- 喜歡貼文 --}}
          {{#if isLiked }}
          <form action="/tweets/{{tweet.id}}/unlike" method="POST" style="display: inline-block;">
            <button type="submit" class="btn btn btn-outline-danger" style="border: hidden;">
              <i class="fa fa-heart fa-2x"></i></button>
          </form>

          {{else}}
          <form action="/tweets/{{tweet.id}}/like" method="POST">
            <button type="submit" class="btn btn-outline-secondary" style="border: hidden;">
              <i class="fa fa-heart-o fa-2x"></i>
            </button>
          </form>
          {{/if}}

        </div>
      </div>
    </div>

    <div class="border border-3 p-1" style="background-color: #E6ECF0;"></div>

    <div class="d-flex flex-column align-items-center">

      <div style="width: 100%;" class="reply-zone">
        {{#each reply }}
        <div class="d-flex">
          {{!-- 大頭貼 --}}
          <div class="mt-2" style="line-height:40px;">
            <a href="/users/{{this.User.id}}/tweets">
              <img src="{{ this.User.avatar }}" style="border-radius: 100%;width: 60px"></a>
          </div>
          {{!-- 右側文字 --}}
          <div class="ms-3" style="height: 150px;">
            {{!-- 發文者 --}}
            <div style="line-height: 40px;">
              <a href="/users/{{this.User.id}}/tweets" style="text-decoration: none;">
                <div class="d-flex align-items-center mb-0">
                  <p class="fs-5 me-2 mb-0" style="color: black;">{{ this.User.name }}</p>
                  <p class="mb-0" style="color: darkseagreen;">{{ this.User.account }}・{{momentCH this.createdAt}}</p>
                </div>
              </a>
              {{!-- 回復區 --}}
              <div class="reply-btn" data-bs-toggle="modal" data-bs-target="#replyModal" data-id="{{../tweet.id}}"
                style="cursor: pointer;">
                <span style="color:darkgrey;">回復 </span><span style="color: #FF6600;">{{../tweet.User.account}}</span>
              </div>
            </div>
            {{!-- 推文內容 --}}
            <p class="mt-0" style="font-size: small;">
              {{ this.comment }}
            </p>
          </div>
        </div>

        <hr>
        {{/each}}
      </div>
      <div>
        {{!-- 分頁 --}}
        <nav aria-label="Page navigation example">
          <ul class="pagination">
            <li class="page-item">
              <a class="page-link" href="/admin/tweets?page={{ prev }}" aria-label="Previous"
                style="color: darkseagreen;">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
            {{#each totalPage }}
            {{!-- {{ifCont this ../page}}
            <li class="page-item active"><a class="page-link" href="#" style="color: darkseagreen;">{{
                this }}</a></li>
            {{else}} --}}
            <li class="page-item"><a class="page-link" href="/?page={{ this }}" style="color: darkseagreen;">{{
                this }}</a></li>
            {{!-- {{ifCont}} --}}
            {{/each}}
            <li class="page-item">
              <a class="page-link" href="/?page={{ next }}" aria-label="Next" style="color: darkseagreen;">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="replyModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="width:700px;height:600px;">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"><button type="button" class="btn-close" data-bs-dismiss="modal"
            aria-label="Close"></button></h5>

      </div>
      <div class="modal-body d-flex flex-row justify-content-around pb-0">
        <div class="d-flex flex-column">
          <img src="{{ tweet.User.avatar }}" style="border-radius: 100%;width: 60px" id="reply-tweet-img">
          <div class="" style="border-left: 4px solid gray;height:210px;position:absolute;left:60px;top:75px;"></div>
        </div>
        <div class="d-flex flex-column">
          {{!-- 發文者 --}}
          <div class="mb-0" style="width: 550px;">
            <p class="fs-5 me-2 mb-0" style="line-height: 40px;color: black;">{{ tweet.User.name }}</p>
            <p class="mb-0" style="color: darkseagreen;" style="line-height: 40px;">{{ tweet.User.account
              }}</p>
          </div>
          {{!-- 推文內容 --}}
          <div class="" style="width: 550px;">
            <textarea id="reply-tweet-text" cols="30" rows="4" maxlength="140"
              style="width: 100%;border:none;background-color:transparent;resize:none;outline:none;font-size:18px"
              readonly>{{ tweet.description}}</textarea>
          </div>
          <div class=""><span style="color:darkgrey;">回復 </span><span
              style="color: #FF6600;">{{tweet.User.account}}</span></div>

        </div>
      </div>
      <div class="modal-body d-flex flex-row justify-content-around pb-0">
        <div>
          <img src="{{ user.avatar }}" style="border-radius: 100%;width: 60px">
        </div>
        <form action="/tweets/{{tweet.id}}/replies" method="POST" class="mt-3" style="width: 550px;" id="newTweetForm">
          <textarea name="comment" id="newReply" cols="30" rows="5" maxlength="140" placeholder="推你的回覆"
            style="width: 100%;border:none;background-color:transparent;resize:none;outline:none;font-size:18px"
            required></textarea>
          <div class="d-flex flex-column align-items-end p-2"><button type="submit" class="btn post-a-tweet"
              style="background-color: #FF6600;color: white; border-radius: 45%;font-size:20px;"
              onclick="replySubmitButtonClick(event)">回復</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 5">
    <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <img src="https://yt3.ggpht.com/ytc/AKedOLSMq3y4-2mILcS9X7GTvNYswkMqpjyE6y1c0U3A6w=s900-c-k-c0x00ffffff-no-rj"
          class="rounded me-2" alt="..." style="width: 30px;height:30px;">
        <strong class="me-auto">AC Tweet</strong>
        <small>1 mins ago</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Hello, world! This is a toast message.
      </div>
    </div>
  </div>